name: publish dev image docker
on:
  push:
    branches:
      - '*'
      - '*/*'
      - '!master'
jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@master
      - uses: DamianReeves/write-file-action
        with:
          path: $GITHUB_WORKSPACE/recipes/version.py
          contents: |
            echo "VERSION_NUMBER = 'develop'"
            echo "BUILD_REF = '$(git rev-parse --short "$GITHUB_SHA")'"
          write-mode: overwrite
      - name: Publish to Registry
        uses: elgohr/Publish-Docker-Github-Action@2.13
        with:
          name: vabene1111/recipes
          username: ${{ secrets.DOCKER_USERNAME }}
          password: ${{ secrets.DOCKER_PASSWORD }}
