
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Tandoor Recipe Documentation">
      
      
        <meta name="author" content="vabene1111">
      
      
      
        <link rel="prev" href="../shopping/">
      
      
        <link rel="next" href="../automation/">
      
      
        
      
      
      <link rel="icon" href="../../logo_color.svg">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.1">
    
    
      
        <title>Authentication - Tandoor Recipes</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.484c7ddc.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="custom" data-md-color-accent="custom">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#allauth" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Tandoor Recipes" class="md-header__button md-logo" aria-label="Tandoor Recipes" data-md-component="logo">
      
  <img src="../../logo_color.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Tandoor Recipes
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Authentication
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/vabene1111/recipes" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Tandoor Recipes" class="md-nav__button md-logo" aria-label="Tandoor Recipes" data-md-component="logo">
      
  <img src="../../logo_color.svg" alt="logo">

    </a>
    Tandoor Recipes
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/vabene1111/recipes" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Home
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Installation
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Installation
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../install/docker/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Docker
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../install/unraid/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Unraid
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../install/synology/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Synology
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../install/kubernetes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Kubernetes
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../install/kubesail/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    KubeSail or PiBox
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../install/truenas_portainer/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    TrueNAS Portainer
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../install/wsl/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    WSL
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../install/archlinux/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ArchLinux
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../install/homeassistant/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    HomeAssistant
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../install/manual/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Manual
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../install/other/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Other setups
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Features
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Features
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../templating/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Templating
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../shopping/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Shopping
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    Authentication
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    Authentication
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#allauth" class="md-nav__link">
    <span class="md-ellipsis">
      
        Allauth
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Allauth">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#configuration-via-environment" class="md-nav__link">
    <span class="md-ellipsis">
      
        Configuration, via environment
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configuration-via-django-admin" class="md-nav__link">
    <span class="md-ellipsis">
      
        Configuration, via Django Admin
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#third-party-authentication-example" class="md-nav__link">
    <span class="md-ellipsis">
      
        Third-party authentication example
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#linking-accounts" class="md-nav__link">
    <span class="md-ellipsis">
      
        Linking accounts
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ldap" class="md-nav__link">
    <span class="md-ellipsis">
      
        LDAP
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#external-authentication" class="md-nav__link">
    <span class="md-ellipsis">
      
        External Authentication
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="External Authentication">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#configuration-example-for-authelia" class="md-nav__link">
    <span class="md-ellipsis">
      
        Configuration Example for Authelia
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../automation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Automation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../connectors/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Connectors
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../external_recipes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Storages and Sync
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../import_export/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Import/Export
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../telegram_bot/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Telegram bot
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    System
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    System
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../system/configuration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Configuration
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../system/updating/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Updating
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../system/migration_sqlite-postgres/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Migrate sqlite to postgres
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../system/permissions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Permission System
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../system/backup/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Backup
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Contributing
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    Contributing
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../contribute/contribute/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../contribute/translations/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Translations
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../contribute/documentation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Documentation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../contribute/guidelines/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Code
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../contribute/installation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Installation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_6" >
        
          
          <label class="md-nav__link" for="__nav_5_6" id="__nav_5_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    IDE Setup
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    IDE Setup
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../contribute/vscode/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    VSCode
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../contribute/pycharm/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    PyCharm
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../contribute/related/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Related Projects
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../faq/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    FAQ
  

    
  </span>
  
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#allauth" class="md-nav__link">
    <span class="md-ellipsis">
      
        Allauth
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Allauth">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#configuration-via-environment" class="md-nav__link">
    <span class="md-ellipsis">
      
        Configuration, via environment
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configuration-via-django-admin" class="md-nav__link">
    <span class="md-ellipsis">
      
        Configuration, via Django Admin
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#third-party-authentication-example" class="md-nav__link">
    <span class="md-ellipsis">
      
        Third-party authentication example
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#linking-accounts" class="md-nav__link">
    <span class="md-ellipsis">
      
        Linking accounts
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ldap" class="md-nav__link">
    <span class="md-ellipsis">
      
        LDAP
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#external-authentication" class="md-nav__link">
    <span class="md-ellipsis">
      
        External Authentication
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="External Authentication">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#configuration-example-for-authelia" class="md-nav__link">
    <span class="md-ellipsis">
      
        Configuration Example for Authelia
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  


  
  


  <h1>Authentication</h1>

<p>Besides the normal django username and password authentication this application supports multiple
methods of central account management and authentication.</p>
<h2 id="allauth">Allauth</h2>
<p><a href="https://django-allauth.readthedocs.io/en/latest/index.html">Django Allauth</a> is an awesome project that
allows you to use a <a href="https://docs.allauth.org/en/latest/socialaccount/providers/index.html">huge number</a> of different
authentication providers.</p>
<p>They basically explain everything in their documentation, but the following is a short overview on how to get started.</p>
<!-- prettier-ignore -->
<div class="admonition warning">
<p class="admonition-title">Public Providers</p>
<p>If you choose Google, Github or any other publicly available service as your authentication provider anyone
with an account on that site can create an account on your installation.
A new account does not have any permission but it is still <strong>not recommended</strong> to give public access to
your installation.</p>
</div>
<p>Choose a provider from the <a href="https://docs.allauth.org/en/latest/socialaccount/providers/index.html">list</a> and install it using the environment variable <code>SOCIAL_PROVIDERS</code> as shown
in the example below.</p>
<p>When at least one social provider is set up, the social login sign in buttons should appear on the login page. The example below enables Nextcloud and the generic OpenID Connect providers.</p>
<div class="highlight"><pre><span></span><code><span class="na">SOCIAL_PROVIDERS</span><span class="o">=</span><span class="s">allauth.socialaccount.providers.openid_connect,allauth.socialaccount.providers.nextcloud</span>
</code></pre></div>
<!-- prettier-ignore -->
<div class="admonition warning">
<p class="admonition-title">Formatting</p>
</div>
<p>The exact formatting is important so make sure to follow the steps explained here!</p>
<h3 id="configuration-via-environment">Configuration, via environment</h3>
<p>Depending on your authentication provider you <strong>might need</strong> to configure it.
This needs to be done through the settings system. To make the system flexible (allow multiple providers) and to
not require another file to be mounted into the container the configuration ins done through a single
environment variable. The downside of this approach is that the configuration needs to be put into a single line
as environment files loaded by docker compose don't support multiple lines for a single variable.</p>
<p>The line data needs to either be in json or as Python dictionary syntax.</p>
<p>Take the example configuration from the allauth docs, fill in your settings and then inline the whole object
(you can use a service like <a href="https://www.freeformatter.com/json-formatter.html">www.freeformatter.com</a> for formatting).
Assign it to the additional <code>SOCIALACCOUNT_PROVIDERS</code> variable.</p>
<p>The example below is for a generic OIDC provider with PKCE enabled. Most values need to be customized for your specifics!</p>
<div class="highlight"><pre><span></span><code><span class="na">SOCIALACCOUNT_PROVIDERS</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;{ &#39;</span><span class="na">openid_connect&#39;: { &#39;OAUTH_PKCE_ENABLED&#39;: True, &#39;APPS&#39;: [ { &#39;provider_id&#39;</span><span class="o">:</span><span class="w"> </span><span class="s">&#39;oidc&#39;</span><span class="na">, &#39;name&#39;</span><span class="o">:</span><span class="w"> </span><span class="s">&#39;My-IDM&#39;</span><span class="na">, &#39;client_id&#39;</span><span class="o">:</span><span class="w"> </span><span class="s">&#39;my_client_id&#39;</span><span class="na">, &#39;secret&#39;</span><span class="o">:</span><span class="w"> </span><span class="s">&#39;my_client_secret&#39;</span><span class="na">, &#39;settings&#39;: { &#39;server_url&#39;</span><span class="o">:</span><span class="w"> </span><span class="s">&#39;https://idm.example.com/oidc/recipes&#39;</span><span class="w"> </span><span class="na">} } ] } }&quot;</span>
</code></pre></div>
<p>Because this JSON contains sensitive data (client id and secret), you may instead choose to save the JSON in a file
and set the environment variable <code>SOCIALACCOUNT_PROVIDERS_FILE</code> to the path of the file containing the JSON.</p>
<div class="highlight"><pre><span></span><code>SOCIALACCOUNT_PROVIDERS_FILE=/run/secrets/socialaccount_providers.txt
</code></pre></div>
<div class="admonition success">
<p class="admonition-title">Improvements ?</p>
<p>There are most likely ways to achieve the same goal but with a cleaner or simpler system.
If you know such a way feel free to let me know.</p>
</div>
<h3 id="configuration-via-django-admin">Configuration, via Django Admin</h3>
<p>Instead of defining <code>SOCIALACCOUNT_PROVIDERS</code> in your environment, most configuration options can be done via the Admin interface. PKCE for <code>openid_connect</code> cannot currently be enabled this way.
Use your superuser account to configure your authentication backend by opening the admin page and do the following</p>
<ol>
<li>Select <code>Sites</code> and edit the default site with the URL of your installation (or create a new).</li>
<li>Create a new <code>Social Application</code> with the required information as stated in the provider documentation of allauth.</li>
<li>Make sure to add your site to the list of available sites</li>
</ol>
<p>Now the provider is configured and you should be able to sign up and sign in using the provider.
Use the superuser account to grant permissions to the newly created users, or enable default access via <code>SOCIAL_DEFAULT_ACCESS</code> &amp; <code>SOCIAL_DEFAULT_GROUP</code>.</p>
<!-- prettier-ignore -->
<div class="admonition info">
<p class="admonition-title">WIP</p>
<p>I do not have a ton of experience with using various single signon providers and also cannot test all of them.
If you have any Feedback or issues let me know.</p>
</div>
<h3 id="third-party-authentication-example">Third-party authentication example</h3>
<p>Keycloak is a popular IAM solution and integration is straight forward thanks to Django Allauth. This example can also be used as reference for other third-party authentication solutions, as documented by Allauth.</p>
<p>At Keycloak, create a new client and assign a <code>Client-ID</code>, this client comes with a <code>Secret-Key</code>. Both values are required later on. Make sure to define the correct Redirection-URL for the service, for example <code>https://tandoor.example.com/*</code>. Depending on your Keycloak setup, you need to assign roles and groups to grant access to the service.</p>
<p>To enable Keycloak as a sign in option, set those variables to define the social provider and specify its configuration:</p>
<div class="highlight"><pre><span></span><code><span class="na">SOCIAL_PROVIDERS</span><span class="o">=</span><span class="s">allauth.socialaccount.providers.openid_connect</span>
<span class="na">SOCIALACCOUNT_PROVIDERS</span><span class="o">=</span><span class="s">&#39;{&quot;</span><span class="na">openid_connect&quot;:{&quot;APPS&quot;:[{&quot;provider_id&quot;</span><span class="o">:</span><span class="s">&quot;keycloak&quot;</span><span class="na">,&quot;name&quot;</span><span class="o">:</span><span class="s">&quot;Keycloak&quot;</span><span class="na">,&quot;client_id&quot;</span><span class="o">:</span><span class="s">&quot;KEYCLOAK_CLIENT_ID&quot;</span><span class="na">,&quot;secret&quot;</span><span class="o">:</span><span class="s">&quot;KEYCLOAK_CLIENT_SECRET&quot;</span><span class="na">,&quot;settings&quot;:{&quot;server_url&quot;</span><span class="o">:</span><span class="s">&quot;https://auth.example.org/realms/KEYCLOAK_REALM/.well-known/openid-configuration&quot;</span><span class="na">}}]}}</span>
<span class="na">&#39;</span>
</code></pre></div>
<p>You are now able to sign in using Keycloak after a restart of the service.</p>
<h3 id="linking-accounts">Linking accounts</h3>
<p>To link an account to an already existing normal user go to the settings page of the user and link it.
Here you can also unlink your account if you no longer want to use a social login method.</p>
<h2 id="ldap">LDAP</h2>
<p>LDAP authentication can be enabled in the <code>.env</code> file by setting <code>LDAP_AUTH=1</code>.
If set, users listed in the LDAP instance will be able to sign in without signing up.
These variables must be set to configure the connection to the LDAP instance:</p>
<div class="highlight"><pre><span></span><code>AUTH_LDAP_SERVER_URI=ldap://ldap.example.org:389
AUTH_LDAP_BIND_DN=uid=admin,ou=users,dc=example,dc=org
AUTH_LDAP_BIND_PASSWORD=adminpassword
AUTH_LDAP_USER_SEARCH_BASE_DN=ou=users,dc=example,dc=org
</code></pre></div>
<p>Additional optional variables:</p>
<div class="highlight"><pre><span></span><code>AUTH_LDAP_USER_SEARCH_FILTER_STR=(uid=%(user)s)
AUTH_LDAP_USER_ATTR_MAP={&#39;first_name&#39;: &#39;givenName&#39;, &#39;last_name&#39;: &#39;sn&#39;, &#39;email&#39;: &#39;mail&#39;}
AUTH_LDAP_ALWAYS_UPDATE_USER=1
AUTH_LDAP_CACHE_TIMEOUT=3600
AUTH_LDAP_START_TLS=1
AUTH_LDAP_TLS_CACERTFILE=/etc/ssl/certs/own-ca.pem
</code></pre></div>
<h2 id="external-authentication">External Authentication</h2>
<!-- prettier-ignore -->
<div class="admonition warning">
<p class="admonition-title">Security Impact</p>
<p>If you just set <code>REMOTE_USER_AUTH=1</code> without any additional configuration, <em>anybody</em> can authenticate with <em>any</em> username!</p>
</div>
<!-- prettier-ignore -->
<div class="admonition info">
<p class="admonition-title">Community Contributed Tutorial</p>
<p>This tutorial was provided by a community member. We are not able to provide any support! Please only use, if you know what you are doing!</p>
</div>
<p>In order use external authentication (i.e. using a proxy auth like Authelia, Authentik, etc.) you will need to:</p>
<ol>
<li>Set <code>REMOTE_USER_AUTH=1</code> in the <code>.env</code> file</li>
<li>Update your nginx configuration file</li>
</ol>
<p>Using any of the examples above will automatically generate a configuration file inside a docker volume.
Use <code>docker volume inspect recipes_nginx</code> to find out where your volume is stored.</p>
<!-- prettier-ignore -->
<div class="admonition warning">
<p class="admonition-title">Configuration File Volume</p>
<p>The nginx config volume is generated when the container is first run. You can change the volume to a bind mount in the
<code>docker-compose.yml</code>, but then you will need to manually create it. See section <code>Volumes vs Bind Mounts</code> below
for more information.</p>
</div>
<h3 id="configuration-example-for-authelia">Configuration Example for Authelia</h3>
<div class="highlight"><pre><span></span><code>server {
  listen 80;
  server_name localhost;

  client_max_body_size 16M;

  # serve static files
  location /static/ {
    alias /static/;
  }
  # serve media files
  location /media/ {
    alias /media/;
  }

  # Authelia endpoint for authentication requests
  include /config/nginx/auth.conf;

  # pass requests for dynamic content to gunicorn
  location / {
    proxy_set_header Host $host;
    proxy_pass http://web_recipes:8080;

    # Ensure Authelia is specifically required for this endpoint
    # This line is important as it will return a 401 error if the user doesn&#39;t have access
    include /config/nginx/authelia.conf;

    auth_request_set $user $upstream_http_remote_user;
    proxy_set_header REMOTE-USER $user;
  }

  # Required to allow user to logout of authentication from within Recipes
  # Ensure the &lt;auth_endpoint&gt; below is changed to actual the authentication url
  location /accounts/logout/ {
    return 301 http://&lt;auth_endpoint&gt;/logout;
  }
}
</code></pre></div>
<p>Please refer to the appropriate documentation on how to set up the reverse proxy, authentication, and networks.</p>
<p>Ensure users have been configured for Authelia, and that the endpoint recipes is pointed to is protected but
available.</p>
<p>There is a good guide to the other additional files that need to be added to your nginx set up at
the <a href="https://docs.authelia.com/deployment/supported-proxies/nginx.html">Authelia Docs</a>.</p>
<p>Remember to add the appropriate environment variables to <code>.env</code> file (example for nginx proxy):</p>
<div class="highlight"><pre><span></span><code>VIRTUAL_HOST=
LETSENCRYPT_HOST=
LETSENCRYPT_EMAIL=
PROXY_HEADER=
</code></pre></div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../..", "features": [], "search": "../../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.79ae519e.min.js"></script>
      
    
  </body>
</html>